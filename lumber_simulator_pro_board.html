
<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ü™µ Lumber Simulator - Pro Design Board</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #00ff88;
            --secondary: #ff00ff;
            --accent: #00ffff;
            --dark-bg: #0a0e27;
            --dark-card: #1a1f3a;
            --border: #2a3f5f;
            --text-primary: #ffffff;
            --text-secondary: #b0b8d4;
            --success: #00ff88;
            --warning: #ffaa00;
            --danger: #ff4455;
        }

        body {
            font-family: 'Jetbrains Mono', 'Courier New', monospace;
            background: linear-gradient(135deg, var(--dark-bg) 0%, #1a0033 50%, var(--dark-bg) 100%);
            color: var(--text-primary);
            min-height: 100vh;
            overflow-x: hidden;
        }

        .header {
            background: linear-gradient(90deg, rgba(0,255,136,0.1) 0%, rgba(255,0,255,0.1) 100%);
            border-bottom: 2px solid var(--primary);
            padding: 30px 20px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: radial-gradient(circle at 50% 50%, rgba(0,255,136,0.1) 0%, transparent 70%);
            pointer-events: none;
        }

        .header-content {
            position: relative;
            z-index: 1;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            background: linear-gradient(90deg, var(--primary) 0%, var(--accent) 50%, var(--secondary) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-shadow: 0 0 30px rgba(0,255,136,0.5);
            animation: glow 3s ease-in-out infinite;
        }

        @keyframes glow {
            0%, 100% { text-shadow: 0 0 30px rgba(0,255,136,0.5); }
            50% { text-shadow: 0 0 60px rgba(0,255,136,0.8); }
        }

        .header p {
            color: var(--text-secondary);
            font-size: 1.1em;
        }

        .toolbar {
            background: var(--dark-card);
            border-bottom: 1px solid var(--border);
            padding: 20px;
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            align-items: center;
            justify-content: space-between;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .view-buttons {
            display: flex;
            gap: 10px;
        }

        .view-btn {
            padding: 8px 16px;
            border: 2px solid var(--border);
            background: transparent;
            color: var(--text-secondary);
            cursor: pointer;
            border-radius: 5px;
            transition: all 0.3s ease;
            font-family: inherit;
            font-weight: 600;
        }

        .view-btn:hover {
            border-color: var(--primary);
            color: var(--primary);
            box-shadow: 0 0 15px rgba(0,255,136,0.3);
        }

        .view-btn.active {
            background: var(--primary);
            color: var(--dark-bg);
            border-color: var(--primary);
            box-shadow: 0 0 20px rgba(0,255,136,0.6);
        }

        .controls {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .btn {
            padding: 10px 20px;
            border: 2px solid var(--primary);
            background: linear-gradient(135deg, rgba(0,255,136,0.1) 0%, rgba(0,255,255,0.05) 100%);
            color: var(--primary);
            cursor: pointer;
            border-radius: 5px;
            transition: all 0.3s ease;
            font-family: inherit;
            font-weight: 600;
            position: relative;
            overflow: hidden;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(0,255,136,0.3), transparent);
            transition: left 0.5s;
        }

        .btn:hover {
            background: linear-gradient(135deg, rgba(0,255,136,0.3) 0%, rgba(0,255,255,0.1) 100%);
            box-shadow: 0 0 20px rgba(0,255,136,0.5), inset 0 0 20px rgba(0,255,136,0.1);
            transform: translateY(-2px);
        }

        .btn:hover::before {
            left: 100%;
        }

        .btn-secondary {
            border-color: var(--secondary);
            color: var(--secondary);
        }

        .btn-secondary:hover {
            box-shadow: 0 0 20px rgba(255,0,255,0.5), inset 0 0 20px rgba(255,0,255,0.1);
        }

        .search-box {
            padding: 10px 15px;
            background: rgba(0,255,136,0.05);
            border: 2px solid var(--border);
            border-radius: 5px;
            color: var(--text-primary);
            font-family: inherit;
            transition: all 0.3s ease;
            flex: 1;
            min-width: 200px;
        }

        .search-box:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 15px rgba(0,255,136,0.3);
        }

        .container {
            max-width: 1800px;
            margin: 0 auto;
            padding: 20px;
        }

        /* KANBAN VIEW */
        .kanban-board {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .kanban-column {
            background: var(--dark-card);
            border: 2px solid var(--border);
            border-radius: 8px;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            max-height: 80vh;
            transition: all 0.3s ease;
        }

        .kanban-column:hover {
            border-color: var(--primary);
            box-shadow: 0 0 20px rgba(0,255,136,0.2);
        }

        .column-header {
            background: linear-gradient(90deg, rgba(0,255,136,0.1) 0%, rgba(0,255,255,0.05) 100%);
            border-bottom: 2px solid var(--primary);
            padding: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .column-title {
            font-size: 1.1em;
            font-weight: bold;
            color: var(--primary);
        }

        .column-count {
            background: var(--primary);
            color: var(--dark-bg);
            padding: 3px 10px;
            border-radius: 20px;
            font-size: 0.9em;
            font-weight: bold;
        }

        .cards-container {
            flex: 1;
            overflow-y: auto;
            padding: 15px;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .card {
            background: linear-gradient(135deg, rgba(0,255,255,0.05) 0%, rgba(0,255,136,0.05) 100%);
            border: 1px solid var(--border);
            border-left: 3px solid var(--primary);
            padding: 15px;
            border-radius: 5px;
            cursor: grab;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: linear-gradient(90deg, var(--primary) 0%, var(--accent) 50%, transparent 100%);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .card:hover {
            border-color: var(--primary);
            box-shadow: 0 0 20px rgba(0,255,136,0.3), inset 0 0 20px rgba(0,255,136,0.05);
            transform: translateX(5px);
        }

        .card:hover::before {
            opacity: 1;
        }

        .card.dragging {
            opacity: 0.5;
            transform: scale(0.95);
        }

        .card-title {
            font-weight: bold;
            color: var(--text-primary);
            margin-bottom: 8px;
            font-size: 1em;
        }

        .card-description {
            color: var(--text-secondary);
            font-size: 0.85em;
            line-height: 1.4;
            margin-bottom: 10px;
        }

        .card-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 5px;
            margin-bottom: 10px;
        }

        .tag {
            background: linear-gradient(135deg, rgba(0,255,136,0.2) 0%, rgba(0,255,255,0.2) 100%);
            color: var(--primary);
            padding: 3px 8px;
            border-radius: 3px;
            font-size: 0.75em;
            border: 1px solid var(--primary);
            font-weight: 600;
        }

        .tag.warning {
            background: linear-gradient(135deg, rgba(255,170,0,0.2) 0%, rgba(255,100,0,0.2) 100%);
            color: var(--warning);
            border-color: var(--warning);
        }

        .tag.danger {
            background: linear-gradient(135deg, rgba(255,68,85,0.2) 0%, rgba(255,0,0,0.2) 100%);
            color: var(--danger);
            border-color: var(--danger);
        }

        .card-actions {
            display: flex;
            gap: 8px;
            margin-top: 10px;
            border-top: 1px solid var(--border);
            padding-top: 8px;
        }

        .card-btn {
            background: none;
            border: none;
            color: var(--primary);
            cursor: pointer;
            font-size: 0.9em;
            transition: all 0.2s ease;
            padding: 3px 6px;
            border-radius: 3px;
        }

        .card-btn:hover {
            background: rgba(0,255,136,0.2);
            color: var(--accent);
        }

        /* TABLE VIEW */
        .table-view {
            display: none;
            background: var(--dark-card);
            border: 2px solid var(--border);
            border-radius: 8px;
            overflow: hidden;
            margin-top: 20px;
        }

        .table-view.active {
            display: block;
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        th {
            background: linear-gradient(90deg, rgba(0,255,136,0.1) 0%, rgba(0,255,255,0.05) 100%);
            color: var(--primary);
            padding: 15px;
            text-align: left;
            border-bottom: 2px solid var(--primary);
            font-weight: bold;
            font-size: 0.95em;
        }

        td {
            padding: 15px;
            border-bottom: 1px solid var(--border);
            color: var(--text-primary);
        }

        tr:hover {
            background: rgba(0,255,136,0.05);
        }

        tr:last-child td {
            border-bottom: none;
        }

        /* GALLERY VIEW */
        .gallery-view {
            display: none;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .gallery-view.active {
            display: grid;
        }

        .gallery-item {
            background: var(--dark-card);
            border: 2px solid var(--border);
            border-radius: 8px;
            padding: 20px;
            transition: all 0.3s ease;
            display: flex;
            flex-direction: column;
        }

        .gallery-item:hover {
            border-color: var(--primary);
            box-shadow: 0 0 30px rgba(0,255,136,0.3);
            transform: translateY(-5px);
        }

        .gallery-category {
            color: var(--primary);
            font-size: 0.85em;
            font-weight: bold;
            margin-bottom: 8px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .gallery-title {
            font-size: 1.2em;
            font-weight: bold;
            color: var(--text-primary);
            margin-bottom: 10px;
        }

        .gallery-description {
            color: var(--text-secondary);
            font-size: 0.9em;
            flex: 1;
            margin-bottom: 15px;
            line-height: 1.5;
        }

        /* MODAL */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(10, 14, 39, 0.9);
            backdrop-filter: blur(5px);
            align-items: center;
            justify-content: center;
        }

        .modal.show {
            display: flex;
        }

        .modal-content {
            background: var(--dark-card);
            padding: 40px;
            border-radius: 10px;
            width: 90%;
            max-width: 600px;
            border: 2px solid var(--primary);
            box-shadow: 0 0 50px rgba(0,255,136,0.3);
            animation: slideIn 0.3s ease;
        }

        @keyframes slideIn {
            from {
                transform: translateY(-50px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .modal-header {
            font-size: 1.5em;
            font-weight: bold;
            color: var(--primary);
            margin-bottom: 25px;
            border-bottom: 2px solid var(--border);
            padding-bottom: 15px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            color: var(--primary);
            margin-bottom: 8px;
            font-weight: 600;
            font-size: 0.95em;
        }

        .form-group input,
        .form-group textarea,
        .form-group select {
            width: 100%;
            padding: 12px;
            background: rgba(0,255,136,0.05);
            border: 2px solid var(--border);
            border-radius: 5px;
            color: var(--text-primary);
            font-family: inherit;
            font-size: 1em;
            transition: all 0.3s ease;
        }

        .form-group input:focus,
        .form-group textarea:focus,
        .form-group select:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 15px rgba(0,255,136,0.3);
        }

        .form-group textarea {
            resize: vertical;
            min-height: 100px;
        }

        .modal-buttons {
            display: flex;
            gap: 15px;
            justify-content: flex-end;
            margin-top: 30px;
            border-top: 2px solid var(--border);
            padding-top: 20px;
        }

        .btn-cancel {
            background: transparent;
            border: 2px solid var(--text-secondary);
            color: var(--text-secondary);
        }

        .btn-cancel:hover {
            border-color: var(--danger);
            color: var(--danger);
            box-shadow: 0 0 15px rgba(255,68,85,0.3);
        }

        .btn-save {
            background: linear-gradient(135deg, var(--primary) 0%, var(--accent) 100%);
            color: var(--dark-bg);
            border: none;
        }

        .btn-save:hover {
            box-shadow: 0 0 30px rgba(0,255,136,0.6);
        }

        /* FILTER BAR */
        .filter-bar {
            background: rgba(0,255,136,0.05);
            border: 1px solid var(--border);
            border-radius: 5px;
            padding: 15px;
            margin-bottom: 20px;
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .filter-tag {
            background: rgba(0,255,136,0.1);
            border: 1px solid var(--primary);
            color: var(--primary);
            padding: 6px 12px;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 0.9em;
        }

        .filter-tag:hover {
            background: rgba(0,255,136,0.3);
            box-shadow: 0 0 10px rgba(0,255,136,0.3);
        }

        .filter-tag.active {
            background: var(--primary);
            color: var(--dark-bg);
        }

        /* STATS */
        .stats {
            background: var(--dark-card);
            border: 2px solid var(--border);
            border-radius: 8px;
            padding: 20px;
            margin-top: 30px;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
        }

        .stat-item {
            text-align: center;
            padding: 20px;
            background: linear-gradient(135deg, rgba(0,255,136,0.05) 0%, rgba(0,255,255,0.05) 100%);
            border: 1px solid var(--border);
            border-radius: 5px;
            transition: all 0.3s ease;
        }

        .stat-item:hover {
            border-color: var(--primary);
            box-shadow: 0 0 20px rgba(0,255,136,0.2);
        }

        .stat-number {
            font-size: 2.2em;
            font-weight: bold;
            color: var(--primary);
            margin-bottom: 8px;
        }

        .stat-label {
            color: var(--text-secondary);
            font-size: 0.95em;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        /* SCROLLBAR */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(0,255,136,0.05);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--primary);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--accent);
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 1.8em;
            }

            .toolbar {
                flex-direction: column;
                gap: 15px;
            }

            .kanban-board {
                grid-template-columns: 1fr;
            }

            .gallery-view {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="header-content">
            <h1>ü™µ LUMBER SIMULATOR - PRO DESIGN BOARD</h1>
            <p>Cyberpunk Game Design Management System</p>
        </div>
    </div>

    <div class="toolbar">
        <div class="view-buttons">
            <button class="view-btn active" onclick="switchView('kanban')">üìä Kanban</button>
            <button class="view-btn" onclick="switchView('table')">üìã Table</button>
            <button class="view-btn" onclick="switchView('gallery')">üé® Gallery</button>
        </div>
        <input type="text" class="search-box" id="searchBox" placeholder="üîç Szukaj kart..." onkeyup="filterCards()">
        <div class="controls">
            <button class="btn" onclick="openAddModal()">‚ûï Nowa Karta</button>
            <button class="btn btn-secondary" onclick="exportBoard()">üì• Export</button>
        </div>
    </div>

    <div class="container">
        <!-- KANBAN VIEW -->
        <div id="kanban-view" class="kanban-board" style="display: grid;">
            <!-- Kolumny zostanƒÖ wygenerowane przez JS -->
        </div>

        <!-- TABLE VIEW -->
        <div id="table-view" class="table-view">
            <table id="cardsTable">
                <thead>
                    <tr>
                        <th>Tytu≈Ç</th>
                        <th>Kolumna</th>
                        <th>Opis</th>
                        <th>Tagi</th>
                        <th>Akcje</th>
                    </tr>
                </thead>
                <tbody id="tableBody">
                </tbody>
            </table>
        </div>

        <!-- GALLERY VIEW -->
        <div id="gallery-view" class="gallery-view">
            <!-- Karty zostanƒÖ wygenerowane przez JS -->
        </div>

        <!-- STATS -->
        <div class="stats">
            <div class="stat-item">
                <div class="stat-number" id="totalCards">0</div>
                <div class="stat-label">Karty</div>
            </div>
            <div class="stat-item">
                <div class="stat-number" id="totalSystems">0</div>
                <div class="stat-label">Systemy</div>
            </div>
            <div class="stat-item">
                <div class="stat-number" id="totalBiomes">0</div>
                <div class="stat-label">Biomy</div>
            </div>
            <div class="stat-item">
                <div class="stat-number" id="totalTalents">0</div>
                <div class="stat-label">Talenty</div>
            </div>
            <div class="stat-item">
                <div class="stat-number" id="totalWood">0</div>
                <div class="stat-label">Rodzaje Drewna</div>
            </div>
        </div>
    </div>

    <!-- MODAL -->
    <div class="modal" id="cardModal">
        <div class="modal-content">
            <div class="modal-header" id="modalTitle">‚ûï Nowa Karta</div>
            <form id="cardForm">
                <div class="form-group">
                    <label>üìå Kolumna:</label>
                    <select id="cardColumn" required>
                        <option value="systems">üìã Systemy</option>
                        <option value="biomes">üå≤ Biomy</option>
                        <option value="talents">‚öîÔ∏è Skill Tree</option>
                        <option value="wood">ü™µ Drewno</option>
                        <option value="features">üéÅ Funkcjonalno≈õci</option>
                        <option value="todo">üìù To Do</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>üìù Tytu≈Ç:</label>
                    <input type="text" id="cardTitle" required placeholder="Np: System zbierania drewna">
                </div>
                <div class="form-group">
                    <label>üìñ Opis:</label>
                    <textarea id="cardDescription" placeholder="Szczeg√≥≈Çy mechaniki..."></textarea>
                </div>
                <div class="form-group">
                    <label>üè∑Ô∏è Tagi (oddzielone przecinkiem):</label>
                    <input type="text" id="cardTags" placeholder="Np: core,important,multiplayer">
                </div>
                <div class="modal-buttons">
                    <button type="button" class="btn btn-cancel" onclick="closeModal()">Anuluj</button>
                    <button type="submit" class="btn btn-save">‚úÖ Zapisz Kartƒô</button>
                </div>
            </form>
        </div>
    </div>

    <script>
        let boardData = {
            systems: [],
            biomes: [],
            talents: [],
            wood: [],
            features: [],
            todo: []
        };

        const columns = {
            systems: { title: 'üìã Systemy', color: '--primary' },
            biomes: { title: 'üå≤ Biomy', color: '--accent' },
            talents: { title: '‚öîÔ∏è Skill Tree', color: '--secondary' },
            wood: { title: 'ü™µ Drewno', color: '--primary' },
            features: { title: 'üéÅ Funkcjonalno≈õci', color: '--accent' },
            todo: { title: 'üìù To Do', color: '--warning' }
        };

        const defaultCards = {
            systems: [
                { id: 1, title: 'Zbieranie drewna', description: 'Gracz uderza siekierƒÖ w drzewa. Drzewa majƒÖ HP, respawnujƒÖ siƒô.', tags: ['core', 'multiplayer'] },
                { id: 2, title: 'System Quest√≥w', description: 'Questy dajƒÖ EXP, pieniƒÖdze i nagrody. G≈Ç√≥wne ≈∫r√≥d≈Ço progresji.', tags: ['progression', 'important'] },
                { id: 3, title: 'NPC i Handlowanie', description: 'Gracze sprzedajƒÖ drewno NPC za pieniƒÖdze.', tags: ['economy', 'npc'] },
                { id: 4, title: 'System Level√≥w', description: 'Ka≈ºdy level = 1 punkt talent√≥w. Levele odblokowujƒÖ biomy.', tags: ['progression', 'talents'] }
            ],
            biomes: [
                { id: 5, title: 'Greenwoods (Start)', description: 'Common/Uncommon drewno. Niskie HP drzew, szybki respawn. Event: Rain of Logs.', tags: ['early', 'starter'] },
                { id: 6, title: 'Misty Pines', description: 'Uncommon/Rare drewno. Pierwsze rzadkie drzewa. Efekt mg≈Çy.', tags: ['mid-game'] },
                { id: 7, title: 'Ember Grove', description: 'Rare/Epic drewno. GorƒÖce drzewa, bossowe Burning Colossus.', tags: ['late-game', 'bosses'] },
                { id: 8, title: 'Crystal Forest', description: 'Epic/Legendary drewno. Drzewa fazujƒÖce, Crystal Bloom event.', tags: ['endgame'] },
                { id: 9, title: 'World Tree Summit', description: 'Legendary drzewa, raid-boss World Tree. Endgame content.', tags: ['endgame', 'raid'] }
            ],
            talents: [
                { id: 10, title: 'Gathering Mastery', description: '+5-15% drewna, podw√≥jny drop, mniej durability zu≈ºycia', tags: ['farming', 'dps'] },
                { id: 11, title: 'Strength Branch', description: '+10-20% damage, Power Chop ability, adrenaline buff', tags: ['damage', 'bosses'] },
                { id: 12, title: 'Utility Mastery', description: '+pojemno≈õƒá plecaka, radar drzew, group bonus', tags: ['support', 'economy'] }
            ],
            wood: [
                { id: 13, title: 'Common (Oak, Birch)', description: 'Wysokie farm rate. Basic crafting. Perfect Log drop.', tags: ['common', 'starter'] },
                { id: 14, title: 'Uncommon (Pine, Maple)', description: 'Ulepszone crafty. Resin drop.', tags: ['uncommon'] },
                { id: 15, title: 'Rare (Ash, Darkwood)', description: 'Specjalistyczne crafty. Enchanted Bark drop.', tags: ['rare'] },
                { id: 16, title: 'Epic (Crystalwood, Emberwood)', description: 'Wysokopoziomowe crafty. Heartwood Core drop.', tags: ['epic'] },
                { id: 17, title: 'Legendary (World Tree)', description: 'Najwy≈ºszy tier. Legendary Core, Ancient Seed. Raid drops.', tags: ['legendary', 'raid'] }
            ],
            features: [
                { id: 18, title: 'Multiplayer Events', description: 'Tree Storm, Demon Tree boss, wsp√≥lne efekty dla grupy.', tags: ['multiplayer', 'events'] },
                { id: 19, title: 'Skill Tree System', description: '3 ga≈Çƒôzie, 15+ talent√≥w, synergie miƒôdzy buildami.', tags: ['progression', 'talents'] },
                { id: 20, title: 'Biom Progression', description: '5 biom√≥w z w≈Çasnymi mechanikami, bossami, eventami.', tags: ['progression', 'content'] },
                { id: 21, title: 'Leaderboards', description: 'Ranking po logach, drewnie, poziomach, czasach.', tags: ['competitive', 'social'] }
            ],
            todo: [
                { id: 22, title: 'Scriptowaƒá Tree object', description: 'HP bar, hitbox, drop system, respawn.', tags: ['coding', 'lua', 'urgent'] },
                { id: 23, title: 'NPC kupiec', description: 'Dialog system, sprzeda≈º drewna, animacje.', tags: ['coding', 'npc'] },
                { id: 24, title: 'Skill Tree UI', description: 'Interfejs do wyboru talent√≥w, show synergie.', tags: ['ui', 'important'] },
                { id: 25, title: 'Quest system', description: 'Quest giver, quest log, rewards, EXP tracking.', tags: ['coding', 'progression'] }
            ]
        };

        function init() {
            loadBoard();
            renderKanban();
            renderTable();
            renderGallery();
            updateStats();
        }

        function loadBoard() {
            const saved = localStorage.getItem('lumberBoardPro');
            boardData = saved ? JSON.parse(saved) : JSON.parse(JSON.stringify(defaultCards));
        }

        function saveBoard() {
            localStorage.setItem('lumberBoardPro', JSON.stringify(boardData));
            updateStats();
        }

        function renderKanban() {
            const board = document.getElementById('kanban-view');
            board.innerHTML = '';

            Object.keys(columns).forEach(colKey => {
                const col = document.createElement('div');
                col.className = 'kanban-column';
                col.id = `col-${colKey}`;

                const header = document.createElement('div');
                header.className = 'column-header';
                header.innerHTML = `
                    <span class="column-title">${columns[colKey].title}</span>
                    <span class="column-count">${boardData[colKey].length}</span>
                `;

                const container = document.createElement('div');
                container.className = 'cards-container';
                container.id = `cards-${colKey}`;
                container.ondrop = handleDrop;
                container.ondragover = handleDragOver;

                boardData[colKey].forEach(card => {
                    const cardEl = createCardElement(card, colKey);
                    container.appendChild(cardEl);
                });

                col.appendChild(header);
                col.appendChild(container);
                board.appendChild(col);
            });
        }

        function createCardElement(card, colKey) {
            const el = document.createElement('div');
            el.className = 'card';
            el.draggable = true;
            el.id = `card-${card.id}`;
            el.dataset.column = colKey;
            el.dataset.id = card.id;

            const tagsHtml = card.tags.map(tag => {
                let tagClass = '';
                if (['urgent', 'important'].includes(tag)) tagClass = 'warning';
                if (['raid', 'boss'].includes(tag)) tagClass = 'danger';
                return `<span class="tag ${tagClass}">${tag}</span>`;
            }).join('');

            el.innerHTML = `
                <div class="card-title">${card.title}</div>
                <div class="card-description">${card.description || ''}</div>
                <div class="card-tags">${tagsHtml}</div>
                <div class="card-actions">
                    <button class="card-btn" onclick="editCard('${colKey}', ${card.id})">‚úèÔ∏è Edit</button>
                    <button class="card-btn" onclick="deleteCard('${colKey}', ${card.id})">üóëÔ∏è Del</button>
                </div>
            `;

            el.ondragstart = handleDragStart;
            el.ondragend = handleDragEnd;
            return el;
        }

        let draggedCard = null;

        function handleDragStart(e) {
            draggedCard = this;
            this.classList.add('dragging');
        }

        function handleDragEnd(e) {
            if (draggedCard) draggedCard.classList.remove('dragging');
        }

        function handleDragOver(e) {
            e.preventDefault();
            e.dataTransfer.dropEffect = 'move';
        }

        function handleDrop(e) {
            e.stopPropagation();
            if (draggedCard) {
                const oldCol = draggedCard.dataset.column;
                const cardId = parseInt(draggedCard.dataset.id);
                const newCol = this.id.replace('cards-', '');

                if (oldCol !== newCol) {
                    const idx = boardData[oldCol].findIndex(c => c.id === cardId);
                    const card = boardData[oldCol][idx];
                    boardData[oldCol].splice(idx, 1);
                    boardData[newCol].push(card);
                    saveBoard();
                    renderKanban();
                    renderTable();
                    renderGallery();
                }
            }
        }

        function renderTable() {
            const tbody = document.getElementById('tableBody');
            tbody.innerHTML = '';

            Object.keys(columns).forEach(colKey => {
                boardData[colKey].forEach(card => {
                    const row = document.createElement('tr');
                    row.innerHTML = `
                        <td><strong>${card.title}</strong></td>
                        <td>${columns[colKey].title}</td>
                        <td style="max-width: 200px; overflow: hidden; text-overflow: ellipsis;">${card.description}</td>
                        <td>${card.tags.map(t => `<span class="tag">${t}</span>`).join('')}</td>
                        <td>
                            <button class="card-btn" onclick="editCard('${colKey}', ${card.id})">‚úèÔ∏è</button>
                            <button class="card-btn" onclick="deleteCard('${colKey}', ${card.id})">üóëÔ∏è</button>
                        </td>
                    `;
                    tbody.appendChild(row);
                });
            });
        }

        function renderGallery() {
            const gallery = document.getElementById('gallery-view');
            gallery.innerHTML = '';

            Object.keys(columns).forEach(colKey => {
                boardData[colKey].forEach(card => {
                    const item = document.createElement('div');
                    item.className = 'gallery-item';
                    item.innerHTML = `
                        <div class="gallery-category">${columns[colKey].title}</div>
                        <div class="gallery-title">${card.title}</div>
                        <div class="gallery-description">${card.description}</div>
                        <div class="card-tags">${card.tags.map(t => `<span class="tag">${t}</span>`).join('')}</div>
                        <div class="card-actions" style="margin-top: auto;">
                            <button class="card-btn" onclick="editCard('${colKey}', ${card.id})">‚úèÔ∏è Edit</button>
                            <button class="card-btn" onclick="deleteCard('${colKey}', ${card.id})">üóëÔ∏è Delete</button>
                        </div>
                    `;
                    gallery.appendChild(item);
                });
            });
        }

        function switchView(view) {
            document.querySelectorAll('.view-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');

            document.getElementById('kanban-view').style.display = view === 'kanban' ? 'grid' : 'none';
            document.getElementById('table-view').classList.toggle('active', view === 'table');
            document.getElementById('gallery-view').classList.toggle('active', view === 'gallery');
        }

        function filterCards() {
            const search = document.getElementById('searchBox').value.toLowerCase();
            document.querySelectorAll('.card').forEach(card => {
                const title = card.querySelector('.card-title').textContent.toLowerCase();
                const desc = card.querySelector('.card-description').textContent.toLowerCase();
                card.style.display = title.includes(search) || desc.includes(search) ? '' : 'none';
            });
        }

        function openAddModal() {
            document.getElementById('modalTitle').textContent = '‚ûï Nowa Karta';
            document.getElementById('cardForm').reset();
            document.getElementById('cardForm').dataset.id = '';
            document.getElementById('cardForm').dataset.column = '';
            document.getElementById('cardModal').classList.add('show');
        }

        function editCard(colKey, cardId) {
            const card = boardData[colKey].find(c => c.id === cardId);
            document.getElementById('modalTitle').textContent = '‚úèÔ∏è Edytuj Kartƒô';
            document.getElementById('cardTitle').value = card.title;
            document.getElementById('cardDescription').value = card.description;
            document.getElementById('cardTags').value = card.tags.join(', ');
            document.getElementById('cardColumn').value = colKey;
            document.getElementById('cardForm').dataset.id = cardId;
            document.getElementById('cardForm').dataset.column = colKey;
            document.getElementById('cardModal').classList.add('show');
        }

        function deleteCard(colKey, cardId) {
            if (confirm('UsunƒÖƒá kartƒô?')) {
                const idx = boardData[colKey].findIndex(c => c.id === cardId);
                boardData[colKey].splice(idx, 1);
                saveBoard();
                renderKanban();
                renderTable();
                renderGallery();
            }
        }

        function closeModal() {
            document.getElementById('cardModal').classList.remove('show');
        }

        document.getElementById('cardForm').onsubmit = function(e) {
            e.preventDefault();
            const title = document.getElementById('cardTitle').value;
            const desc = document.getElementById('cardDescription').value;
            const tags = document.getElementById('cardTags').value.split(',').map(t => t.trim()).filter(t => t);
            const col = document.getElementById('cardColumn').value;
            const id = this.dataset.id;
            const oldCol = this.dataset.column;

            if (id) {
                const idx = boardData[oldCol].findIndex(c => c.id == id);
                if (oldCol !== col) {
                    const card = boardData[oldCol][idx];
                    boardData[oldCol].splice(idx, 1);
                    card.title = title;
                    card.description = desc;
                    card.tags = tags;
                    boardData[col].push(card);
                } else {
                    boardData[col][idx] = { id: parseInt(id), title, description: desc, tags };
                }
            } else {
                const newId = Math.max(...Object.values(boardData).flat().map(c => c.id), 0) + 1;
                boardData[col].push({ id: newId, title, description: desc, tags });
            }

            saveBoard();
            renderKanban();
            renderTable();
            renderGallery();
            closeModal();
        };

        function exportBoard() {
            const json = JSON.stringify(boardData, null, 2);
            const blob = new Blob([json], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'lumber-simulator-pro-board.json';
            a.click();
        }

        function updateStats() {
            const total = Object.values(boardData).flat().length;
            document.getElementById('totalCards').textContent = total;
            document.getElementById('totalSystems').textContent = boardData.systems.length;
            document.getElementById('totalBiomes').textContent = boardData.biomes.length;
            document.getElementById('totalTalents').textContent = boardData.talents.length;
            document.getElementById('totalWood').textContent = boardData.wood.length;
        }

        window.onclick = function(e) {
            const modal = document.getElementById('cardModal');
            if (e.target === modal) closeModal();
        };

        init();
    </script>
</body>
</html>
